<div class="property-container">
    <nav class="breadcrumbs">
        Home > {{ location }}
    </nav>

    <div class="gallery-grid">
        <div class="main-image">
            <img [src]="mainImageUrl" [alt]="title">
            <span class="badge">Off-Plan</span>
        </div>
        <div class="side-images">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQKIc_kss4gmWTk9urJ5yqttq3GnZ1y4ZUKDw&s"
                alt="Interior Design">
            <img src="https://tjh.com/wp-content/uploads/2024/11/TJH_HERO_kitchen-design-trends-to-watch-for@2x.webp"
                alt="Modern Kitchen">
        </div>
    </div>

    <div class="content-layout">
        <main class="property-details">
            <div class="header-section">
                <div class="price-row">
                    <h1>{{ price | currency: currency :'symbol':'1.0-0' }}</h1>
                    <span class="installment-tag">{{ currency }} {{ installment }} monthly / {{ installmentPeriod
                        }}</span>
                </div>

                <div class="down-payment-row">
                    <span class="down-payment-badge">
                        <i class="icon-cash">üíµ</i> Down payment: {{ currency }} {{ downPayment }}
                    </span>
                </div>

                <h2 class="location-title">{{ location }}</h2>

                <div class="specs-horizontal">
                    <span class="spec-item"><i class="icon-bed">üõè</i> {{ specs.beds }} Bed</span>
                    <span class="spec-item"><i class="icon-bath">üõÅ</i> {{ specs.baths }} Bath</span>
                    <span class="spec-item"><i class="icon-area">üìê</i> {{ specs.area }} Sq. M.</span>
                </div>

                <div class="description-section">
                    <h3>{{ title }}</h3>
                    <ul class="desc-list">
                        @for (line of description; track line) {
                        <li>{{ line }}</li>
                        }
                    </ul>
                </div>

                <section class="info-table">
                    <h3>Property Information</h3>
                    <div class="grid-info">
                        @for (item of propertySpecs; track item.label) {
                        <div class="info-item">
                            <span class="label">{{ item.label }}</span>
                            <span class="value">{{ item.value }}</span>
                        </div>
                        }
                    </div>
                </section>
            </div>
        </main>

        <aside class="sidebar">
            <div class="broker-card">
                <div class="broker-header">
                    <img [src]="agent.imageUrl" [alt]="agent.name" class="profile-pic">
                    <div class="broker-info">
                        <p class="company-name">{{ agent.company }}</p>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn-email" (click)="emailAgent()">
                        <i class="icon-email">‚úâ</i> Email
                    </button>
                    <button class="btn-call" (click)="callAgent()">
                        <i class="icon-phone">üìû</i> Call
                    </button>
                    <button class="btn-whatsapp" (click)="whatsappAgent()">
                        <i class="icon-whatsapp">üí¨</i>
                    </button>
                </div>

                <div class="broker-footer">
                    <span class="agent-name">{{ agent.name }}</span>
                    <a href="#" class="view-all-link">View all properties ></a>
                </div>
            </div>

            <!-- Analytics Card -->
            <div class="analytics-card"
                style="background: white; padding: 20px; border-radius: 12px; margin-top: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <h3 style="margin-top: 0; color: #374151; font-size: 16px; margin-bottom: 15px;">Property Analytics</h3>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #f3f4f6;">
                        <span style="color: #6b7280; display: flex; align-items: center; gap: 8px;"><i
                                class="fa fa-eye"></i>
                            Total Views</span>
                        <span style="font-weight: bold; color: #111827;">{{ viewCount }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #6b7280; display: flex; align-items: center; gap: 8px;"><i
                                class="fa fa-whatsapp"></i> WhatsApp Leads</span>
                        <span style="font-weight: bold; color: #28b16d;">{{ whatsappClickCount }}</span>
                    </div>
                </div>
            </div>
        </aside>
    </div>
</div>