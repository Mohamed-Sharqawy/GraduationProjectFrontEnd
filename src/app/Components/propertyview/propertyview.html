<div class="property-container">
    <nav class="breadcrumbs">
        {{ 'PROPERTY_VIEW.HOME_LINK' | translate }} > {{ location }}
    </nav>

    <div class="gallery-grid">
        <div class="main-image">
            <img [src]="mainImageUrl" [alt]="title">
            <span class="badge">{{ 'PROPERTY_VIEW.OFF_PLAN' | translate }}</span>
        </div>
        <div class="side-images">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQKIc_kss4gmWTk9urJ5yqttq3GnZ1y4ZUKDw&s"
                alt="Interior Design">
            <img src="https://tjh.com/wp-content/uploads/2024/11/TJH_HERO_kitchen-design-trends-to-watch-for@2x.webp"
                alt="Modern Kitchen">
        </div>
    </div>

    <div class="content-layout">
        <main class="property-details">
            <div class="header-section">
                <div class="price-row">
                    <h1>{{ price | currency: currency :'symbol':'1.0-0' }}</h1>
                    <span class="installment-tag">{{ currency }} {{ installment }} {{ 'PROPERTY_VIEW.MONTHLY' |
                        translate }} / {{ installmentPeriod
                        }}</span>
                </div>

                <div class="down-payment-row">
                    <span class="down-payment-badge">
                        <i class="icon-cash">üíµ</i> {{ 'PROPERTY_VIEW.DOWN_PAYMENT' | translate }}: {{ currency }} {{
                        downPayment }}
                    </span>
                </div>

                <h2 class="location-title">{{ location }}</h2>

                <div class="specs-horizontal">
                    <span class="spec-item"><i class="icon-bed">üõè</i> {{ specs.beds }} {{ 'PROPERTY_VIEW.BED' |
                        translate }}</span>
                    <span class="spec-item"><i class="icon-bath">üõÅ</i> {{ specs.baths }} {{ 'PROPERTY_VIEW.BATH' |
                        translate }}</span>
                    <span class="spec-item"><i class="icon-area">üìê</i> {{ specs.area }} {{ 'PROPERTY_VIEW.SQ_M' |
                        translate }}</span>
                </div>

                <div class="description-section">
                    <h3>{{ title }}</h3>
                    <ul class="desc-list">
                        @for (line of description; track line) {
                        <li>{{ line }}</li>
                        }
                    </ul>
                </div>

                <section class="info-table">
                    <h3>{{ 'PROPERTY_VIEW.PROPERTY_INFO_TITLE' | translate }}</h3>
                    <div class="grid-info">
                        @for (item of propertySpecs; track item.label) {
                        <div class="info-item">
                            <span class="label">{{ item.label }}</span>
                            <span class="value">{{ item.value }}</span>
                        </div>
                        }
                    </div>
                </section>
            </div>
        </main>

        <aside class="sidebar">
            <div class="broker-card">
                <div class="broker-header">
                    <img [src]="agent.imageUrl" [alt]="agent.name" class="profile-pic">
                    <div class="broker-info">
                        <p class="company-name">{{ agent.company }}</p>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn-email" (click)="emailAgent()">
                        <i class="icon-email">‚úâ</i> {{ 'AGENT_PROFILE.EMAIL' | translate }}
                    </button>
                    <button class="btn-call" (click)="callAgent()">
                        <i class="icon-phone">üìû</i> {{ 'AGENT_PROFILE.CALL' | translate }}
                    </button>
                    <button class="btn-whatsapp" (click)="whatsappAgent()">
                        <i class="icon-whatsapp">üí¨</i>
                    </button>
                </div>

                <div class="broker-footer">
                    <span class="agent-name">{{ agent.name }}</span>
                    <a href="#" class="view-all-link">{{ 'PROPERTY_VIEW.VIEW_ALL' | translate }}</a>
                </div>
            </div>

            <!-- Save Property Button -->
            <div class="save-property-card"
                style="background: white; padding: 16px; border-radius: 12px; margin-top: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <button (click)="toggleSave()"
                    class="w-full py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-all"
                    [style.background]="isSaved ? '#fee2e2' : '#f3f4f6'" [style.color]="isSaved ? '#dc2626' : '#374151'"
                    style="border: none; cursor: pointer;">
                    <i class="fa" [class.fa-heart]="isSaved" [class.fa-heart-o]="!isSaved"
                        [style.color]="isSaved ? '#dc2626' : '#6b7280'"></i>
                    {{ isSaved ? ('PROPERTY_VIEW.REMOVE_FROM_SAVED' | translate) : ('PROPERTY_VIEW.SAVE_PROPERTY' |
                    translate) }}
                </button>
            </div>

            <!-- Analytics Card -->
            <div class="analytics-card"
                style="background: white; padding: 20px; border-radius: 12px; margin-top: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <h3 style="margin-top: 0; color: #374151; font-size: 16px; margin-bottom: 15px;">{{
                    'PROPERTY_VIEW.PROPERTY_ANALYTICS' | translate }}</h3>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #f3f4f6;">
                        <span style="color: #6b7280; display: flex; align-items: center; gap: 8px;"><i
                                class="fa fa-eye"></i>
                            {{ 'PROPERTY_VIEW.TOTAL_VIEWS' | translate }}</span>
                        <span style="font-weight: bold; color: #111827;">{{ viewCount }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #6b7280; display: flex; align-items: center; gap: 8px;"><i
                                class="fa fa-whatsapp"></i> {{ 'PROPERTY_VIEW.WHATSAPP_LEADS' | translate }}</span>
                        <span style="font-weight: bold; color: #28b16d;">{{ whatsappClickCount }}</span>
                    </div>
                </div>
            </div>
        </aside>
    </div>
</div>