<div class="modal-overlay" (click)="onCancel()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header">
      <h2>{{ 'CHANGE_PASSWORD.TITLE' | translate }}</h2>
      <button class="close-btn" (click)="onCancel()" type="button">&times;</button>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" class="password-form">
      <!-- Current Password -->
      <div class="form-group">
        <label>{{ 'CHANGE_PASSWORD.CURRENT_PASSWORD' | translate }}</label>
        <div class="password-input-wrapper">
          <input 
            [type]="showCurrentPassword ? 'text' : 'password'"
            [(ngModel)]="currentPassword"
            name="currentPassword"
            [placeholder]="'CHANGE_PASSWORD.CURRENT_PASSWORD_PLACEHOLDER' | translate"
            class="form-control"
            required>
          <button type="button" class="toggle-password" (click)="toggleCurrentPasswordVisibility()">
            <i [class]="showCurrentPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
          </button>
        </div>
      </div>

      <!-- New Password -->
      <div class="form-group">
        <label>{{ 'CHANGE_PASSWORD.NEW_PASSWORD' | translate }}</label>
        <div class="password-input-wrapper">
          <input 
            [type]="showNewPassword ? 'text' : 'password'"
            [(ngModel)]="newPassword"
            name="newPassword"
            [placeholder]="'CHANGE_PASSWORD.NEW_PASSWORD_PLACEHOLDER' | translate"
            class="form-control"
            required>
          <button type="button" class="toggle-password" (click)="toggleNewPasswordVisibility()">
            <i [class]="showNewPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
          </button>
        </div>
        <small class="hint">{{ 'CHANGE_PASSWORD.MIN_LENGTH_HINT' | translate }}</small>
      </div>

      <!-- Confirm Password -->
      <div class="form-group">
        <label>{{ 'CHANGE_PASSWORD.CONFIRM_PASSWORD' | translate }}</label>
        <div class="password-input-wrapper">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            [placeholder]="'CHANGE_PASSWORD.CONFIRM_PASSWORD_PLACEHOLDER' | translate"
            class="form-control"
            [class.error]="confirmPassword && !passwordsMatch"
            required>
          <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
            <i [class]="showConfirmPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
          </button>
        </div>
        <small *ngIf="confirmPassword && !passwordsMatch" class="error-text">
          {{ 'CHANGE_PASSWORD.PASSWORDS_MISMATCH' | translate }}
        </small>
      </div>

      <!-- Actions -->
      <div class="modal-actions">
        <button type="button" class="btn-cancel" (click)="onCancel()" [disabled]="isSubmitting">
          {{ 'COMMON.CANCEL' | translate }}
        </button>
        <button type="submit" class="btn-submit" [disabled]="!isValid || isSubmitting">
          <span *ngIf="!isSubmitting">{{ 'CHANGE_PASSWORD.SUBMIT' | translate }}</span>
          <span *ngIf="isSubmitting">{{ 'COMMON.LOADING' | translate }}...</span>
        </button>
      </div>
    </form>
  </div>
</div>
